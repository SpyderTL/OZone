<?xml version="1.0" encoding="utf-8"?>

<scope
	xmlns="http://metalx.org/Program"
	xmlns:cpu="http://metalx.org/Mos/6502/Operators"
	xmlns:mem="http://metalx.org/6502/Functions/Memory"
	xmlns:str="http://metalx.org/6502/Functions/String"
	xmlns:mm="http://metalx.org/6502/Functions/MemoryManager"
	xmlns:clsf="http://metalx.org/C64/Functions/Class"
	xmlns:cls="http://metalx.org/Class"
	xmlns:scr="http://metalx.org/x16Console/Functions/Screen"
	xmlns:ascii="http://metalx.org/Ansi/Ascii"
	xmlns:petscii="http://metalx.org/Commodore64/Petscii"
	xmlns:var="http://metalx.org/Variable">

	<!--Hardware Registers-->
	<label id="VideoAddressLow" offset="9f20"/>
	<label id="VideoAddressMid" offset="9f21"/>
	<label id="VideoAddressHigh" offset="9f22"/>
	<label id="VideoData0" offset="9f23"/>
	<label id="VideoData1" offset="9f24"/>
	<label id="VideoControl" offset="9f25"/>
	<label id="VideoInterruptEnable" offset="9f26"/>
	<label id="VideoInterruptStatus" offset="9f27"/>
	
	<!--Sound Registers-->
	<label id="FrequencyLow0" offset="01f9c0"/>
	<label id="FrequencyHigh0" offset="01f9c1"/>
	<label id="Volume0" offset="01f9c2"/>
	<label id="Waveform0" offset="01f9c3"/>

	<!--Clear Sound Buffer-->
	<cpu:CopyImmediate8ToXIndex/>
	<hex>40</hex>

	<cpu:CopyImmediate8ToYIndex/>
	<byte>0</byte>

	<cpu:CopyImmediate8ToAccumulator/>
	<hex>00</hex>

	<cpu:CopyAccumulatorToImmediate8Address/>
	<hex>02</hex>

	<cpu:CopyImmediate8ToAccumulator/>
	<hex>10</hex>

	<cpu:CopyAccumulatorToImmediate8Address/>
	<hex>03</hex>

	<cpu:CopyImmediate8ToAccumulator/>
	<byte>0</byte>

	<label id="clearSoundBuffer"/>

	<cpu:CopyAccumulatorToImmediate8PointerPlusYIndexAddress/>
	<hex>02</hex>

	<cpu:IncrementYIndex/>

	<cpu:DecrementXIndex/>

	<cpu:BranchToRelative8IfNotZero/>
	<addressOf ref="clearSoundBuffer" type="Relative8"/>

	<label id="loop"/>

	<!--Note 48 (C4)-->
	<cpu:CopyImmediate8ToAccumulator/>
	<byte>48</byte>

	<cpu:ShiftAccumulatorLeft/>

	<cpu:CopyAccumulatorToYIndex/>

	<cpu:CopyImmediate16PlusYIndexAddressToAccumulator/>
	<addressOf ref="notes" type="Absolute16"/>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<hex>1000</hex>

	<cpu:CopyImmediate16PlusYIndexAddressToAccumulator/>
	<addressOf ref="notes" type="Absolute16" offset="1"/>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<hex>1001</hex>

	<!--Volume 63 + Left/Right-->
	<cpu:CopyImmediate8ToAccumulator/>
	<hex>ff</hex>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<hex>1002</hex>

	<!--Waveform: Pulse Duty: 63-->
	<cpu:CopyImmediate8ToAccumulator/>
	<hex>3f</hex>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<hex>1003</hex>

	<!--Note 52 (E4)-->
	<cpu:CopyImmediate8ToAccumulator/>
	<byte>52</byte>

	<cpu:ShiftAccumulatorLeft/>

	<cpu:CopyAccumulatorToYIndex/>

	<cpu:CopyImmediate16PlusYIndexAddressToAccumulator/>
	<addressOf ref="notes" type="Absolute16"/>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<hex>1004</hex>

	<cpu:CopyImmediate16PlusYIndexAddressToAccumulator/>
	<addressOf ref="notes" type="Absolute16" offset="1"/>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<hex>1005</hex>

	<!--Volume 63 + Left/Right-->
	<cpu:CopyImmediate8ToAccumulator/>
	<hex>ff</hex>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<hex>1006</hex>

	<!--Waveform: Pulse Duty: 63-->
	<cpu:CopyImmediate8ToAccumulator/>
	<hex>3f</hex>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<hex>1007</hex>

	<!--Note 55 (G4)-->
	<cpu:CopyImmediate8ToAccumulator/>
	<byte>55</byte>

	<cpu:ShiftAccumulatorLeft/>

	<cpu:CopyAccumulatorToYIndex/>

	<cpu:CopyImmediate16PlusYIndexAddressToAccumulator/>
	<addressOf ref="notes" type="Absolute16"/>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<hex>1008</hex>

	<cpu:CopyImmediate16PlusYIndexAddressToAccumulator/>
	<addressOf ref="notes" type="Absolute16" offset="1"/>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<hex>1009</hex>

	<!--Volume 63 + Left/Right-->
	<cpu:CopyImmediate8ToAccumulator/>
	<hex>ff</hex>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<hex>100a</hex>

	<!--Waveform: Pulse Duty: 63-->
	<cpu:CopyImmediate8ToAccumulator/>
	<hex>3f</hex>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<hex>100b</hex>

	<!--Update Sound Generator-->
	<cpu:CopyImmediate8ToAccumulator/>
	<addressOf ref="FrequencyLow0" type="Absolute16Low8"/>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<addressOf ref="VideoAddressLow" type="Absolute16"/>

	<cpu:CopyImmediate8ToAccumulator/>
	<addressOf ref="FrequencyLow0" type="Absolute16High8"/>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<addressOf ref="VideoAddressMid" type="Absolute16"/>

	<cpu:CopyImmediate8ToAccumulator/>
	<hex>11</hex>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<addressOf ref="VideoAddressHigh" type="Absolute16"/>

	<cpu:CopyImmediate8ToXIndex/>
	<hex>40</hex>

	<cpu:CopyImmediate8ToYIndex/>
	<byte>0</byte>

	<cpu:CopyImmediate8ToAccumulator/>
	<hex>00</hex>

	<cpu:CopyAccumulatorToImmediate8Address/>
	<hex>02</hex>

	<cpu:CopyImmediate8ToAccumulator/>
	<hex>10</hex>

	<cpu:CopyAccumulatorToImmediate8Address/>
	<hex>03</hex>

	<label id="copySoundRegisters"/>

	<cpu:CopyImmediate8PointerPlusYIndexAddressToAccumulator/>
	<hex>02</hex>

	<cpu:CopyAccumulatorToImmediate16Address/>
	<addressOf ref="VideoData0" type="Absolute16"/>

	<cpu:IncrementYIndex/>

	<cpu:DecrementXIndex/>

	<cpu:BranchToRelative8IfNotZero/>
	<addressOf ref="copySoundRegisters" type="Relative8"/>

	<cpu:JumpToImmediate16Address/>
	<addressOf ref="loop" type="Absolute16"/>

	<cpu:ReturnFromSubroutine/>
	
	<!--Tables-->
	<label id="notes">
		<hex>002C</hex>
		<hex>002F</hex>
		<hex>0031</hex>
		<hex>0034</hex>
		<hex>0037</hex>
		<hex>003B</hex>
		<hex>003E</hex>
		<hex>0042</hex>
		<hex>0046</hex>
		<hex>004A</hex>
		<hex>004E</hex>
		<hex>0053</hex>
		<hex>0058</hex>
		<hex>005D</hex>
		<hex>0063</hex>
		<hex>0068</hex>
		<hex>006F</hex>
		<hex>0075</hex>
		<hex>007C</hex>
		<hex>0084</hex>
		<hex>008B</hex>
		<hex>0094</hex>
		<hex>009C</hex>
		<hex>00A6</hex>
		<hex>00B0</hex>
		<hex>00BA</hex>
		<hex>00C5</hex>
		<hex>00D1</hex>
		<hex>00DD</hex>
		<hex>00EA</hex>
		<hex>00F8</hex>
		<hex>0107</hex>
		<hex>0117</hex>
		<hex>0127</hex>
		<hex>0139</hex>
		<hex>014B</hex>
		<hex>015F</hex>
		<hex>0174</hex>
		<hex>018A</hex>
		<hex>01A2</hex>
		<hex>01BA</hex>
		<hex>01D5</hex>
		<hex>01F1</hex>
		<hex>020E</hex>
		<hex>022D</hex>
		<hex>024F</hex>
		<hex>0272</hex>
		<hex>0297</hex>
		<hex>02BE</hex>
		<hex>02E8</hex>
		<hex>0314</hex>
		<hex>0343</hex>
		<hex>0375</hex>
		<hex>03A9</hex>
		<hex>03E1</hex>
		<hex>041C</hex>
		<hex>045B</hex>
		<hex>049D</hex>
		<hex>04E3</hex>
		<hex>052E</hex>
		<hex>057D</hex>
		<hex>05D0</hex>
		<hex>0629</hex>
		<hex>0686</hex>
		<hex>06EA</hex>
		<hex>0753</hex>
		<hex>07C2</hex>
		<hex>0839</hex>
		<hex>08B6</hex>
		<hex>093A</hex>
		<hex>09C7</hex>
		<hex>0A5C</hex>
		<hex>0AF9</hex>
		<hex>0BA0</hex>
		<hex>0C51</hex>
		<hex>0D0D</hex>
		<hex>0DD3</hex>
		<hex>0EA6</hex>
		<hex>0F85</hex>
		<hex>1071</hex>
		<hex>116B</hex>
		<hex>1274</hex>
		<hex>138D</hex>
		<hex>14B7</hex>
		<hex>15F2</hex>
		<hex>1740</hex>
		<hex>18A2</hex>
		<hex>1A19</hex>
		<hex>1BA7</hex>
		<hex>1D4C</hex>
		<hex>1F0A</hex>
		<hex>20E2</hex>
		<hex>22D7</hex>
		<hex>24E9</hex>
		<hex>271B</hex>
		<hex>296E</hex>
		<hex>2BE5</hex>
		<hex>2E81</hex>
		<hex>3145</hex>
		<hex>3433</hex>
		<hex>374D</hex>
		<hex>3A97</hex>
		<hex>3E13</hex>
		<hex>41C4</hex>
		<hex>45AD</hex>
		<hex>49D2</hex>
		<hex>4E36</hex>
		<hex>52DC</hex>
	</label>
	
	<!--Variables-->
	<label id="freeMemory"/>
</scope>