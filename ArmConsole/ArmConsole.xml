<?xml version="1.0" encoding="utf-8"?>

<scope
	xmlns="http://metalx.org/Program"
	xmlns:cpu="http://metalx.org/Arm/v6/Operators"
	xmlns:var="http://metalx.org/Variable">

	<label id="uart" offset="20201000"/>
	
	<cpu:SetRegisterToAddressOf register="2" ref="uart"/>

	<label id="waitForSerial"/>
	
	<cpu:CopyAddressToRegister8 register="1" addressRegister="2" offset="24"/>
	
	<cpu:TestAndRegisterWithValue register="1" value="16"/>

	<cpu:Jump condition="NotEqual" ref="waitForSerial"/>
	
	<cpu:CopyAddressToRegister8 register="1" addressRegister="2"/>
	
	<cpu:CopyRegisterToAddress8 register="1" addressRegister="2"/>

	<cpu:Jump ref="waitForSerial"/>
</scope>