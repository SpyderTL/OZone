<?xml version="1.0" encoding="utf-8"?>

<scope
	xmlns="http://metalx.org/Program"
	xmlns:cpu="http://metalx.org/Mos/6502/Operators"
	xmlns:var="http://metalx.org/Variable">

	<label id="Update" export="SidGenerator.Update">
		<!--Channel Frequencies-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="0"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="0"/>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="1"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="1"/>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="16"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="7"/>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="17"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="8"/>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="32"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="14"/>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="33"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="15"/>

		<!--Channel Pulse Duties-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="2"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="2"/>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="3"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="3"/>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="18"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="9"/>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="19"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="10"/>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="34"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="16"/>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="35"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="17"/>

		<!--Channel 0 Control-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="4"/>

		<cpu:CopyAccumulatorToImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="5"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="6"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="7"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="8"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="9"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="10"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="11"/>

		<cpu:RollAccumulatorRight/>

		<cpu:CopyImmediate8AddressToAccumulator/>
		<hex>02</hex>

		<cpu:RollAccumulatorLeft/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="4"/>

		<!--Channel 1 Control-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="20"/>

		<cpu:CopyAccumulatorToImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="21"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="22"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="23"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="24"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="25"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="26"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="27"/>

		<cpu:RollAccumulatorRight/>

		<cpu:CopyImmediate8AddressToAccumulator/>
		<hex>02</hex>

		<cpu:RollAccumulatorLeft/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="11"/>

		<!--Channel 2 Control-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="36"/>

		<cpu:CopyAccumulatorToImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="37"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="38"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="39"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="40"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="41"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="42"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="43"/>

		<cpu:RollAccumulatorRight/>

		<cpu:CopyImmediate8AddressToAccumulator/>
		<hex>02</hex>

		<cpu:RollAccumulatorLeft/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="18"/>

		<!--Channel 0 Attack/Decay-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="12"/>

		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>

		<cpu:CopyAccumulatorToImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="13"/>

		<cpu:AndAccumulatorWithImmediate8/>
		<hex>0f</hex>

		<cpu:OrAccumulatorWithImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="5"/>

		<!--Channel 0 Sustain/Release-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="14"/>

		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>

		<cpu:CopyAccumulatorToImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="15"/>

		<cpu:AndAccumulatorWithImmediate8/>
		<hex>0f</hex>

		<cpu:OrAccumulatorWithImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="6"/>

		<!--Channel 1 Attack/Decay-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="28"/>

		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>

		<cpu:CopyAccumulatorToImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="29"/>

		<cpu:AndAccumulatorWithImmediate8/>
		<hex>0f</hex>

		<cpu:OrAccumulatorWithImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="12"/>

		<!--Channel 1 Sustain/Release-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="30"/>

		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>

		<cpu:CopyAccumulatorToImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="31"/>

		<cpu:AndAccumulatorWithImmediate8/>
		<hex>0f</hex>

		<cpu:OrAccumulatorWithImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="13"/>

		<!--Channel 2 Attack/Decay-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="44"/>

		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>

		<cpu:CopyAccumulatorToImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="45"/>

		<cpu:AndAccumulatorWithImmediate8/>
		<hex>0f</hex>

		<cpu:OrAccumulatorWithImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="19"/>

		<!--Channel 2 Sustain/Release-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="46"/>

		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>
		<cpu:ShiftAccumulatorLeft/>

		<cpu:CopyAccumulatorToImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="47"/>

		<cpu:AndAccumulatorWithImmediate8/>
		<hex>0f</hex>

		<cpu:OrAccumulatorWithImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="20"/>

		<!--Filter Cutoff-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="48"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="21"/>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="49"/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="22"/>

		<!--Filter Control-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="50"/>

		<cpu:CopyAccumulatorToImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="51"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="54"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="53"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="52"/>

		<cpu:RollAccumulatorRight/>

		<cpu:CopyImmediate8AddressToAccumulator/>
		<hex>02</hex>

		<cpu:RollAccumulatorLeft/>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="23"/>

		<!--Volume/Filter Bands-->
		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="55"/>

		<cpu:CopyAccumulatorToImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="56"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="57"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="58"/>

		<cpu:RollAccumulatorRight/>

		<cpu:RollImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:ShiftImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:ShiftImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:ShiftImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:ShiftImmediate8AddressLeft/>
		<hex>02</hex>

		<cpu:CopyImmediate16AddressToAccumulator/>
		<addressOf ref="SoundGenerator.Registers" type="Absolute16" offset="59"/>

		<cpu:AndAccumulatorWithImmediate8/>
		<hex>0f</hex>

		<cpu:OrAccumulatorWithImmediate8Address/>
		<hex>02</hex>

		<cpu:CopyAccumulatorToImmediate16Address/>
		<addressOf ref="Sid.Registers" type="Absolute16" offset="24"/>

		<cpu:ReturnFromSubroutine/>
	</label>
</scope>